<rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title>All Posts - 理科羊的放牧場</title><link>https://rico4338.github.io/posts/</link><description>All Posts | 理科羊的放牧場</description><generator>Hugo -- gohugo.io</generator><language>zh-TW</language><managingEditor>dsc4338@hotmail.com.tw (RicoYang)</managingEditor><webMaster>dsc4338@hotmail.com.tw (RicoYang)</webMaster><lastBuildDate>Mon, 20 Feb 2023 22:57:13 +0800</lastBuildDate><atom:link href="https://rico4338.github.io/posts/" rel="self" type="application/rss+xml"/><item><title>關於C# List Add效能的那點事之一</title><link>https://rico4338.github.io/posts/list-add-performance/list-add-performance/</link><pubDate>Mon, 20 Feb 2023 22:57:13 +0800</pubDate><author>RicoYang</author><guid>https://rico4338.github.io/posts/list-add-performance/list-add-performance/</guid><description><![CDATA[陣列長度是固定的，但是List&lt;T&gt;好像沒有特別的限制耶? 以前在學校學到，當今天宣告一個array的時候是需要給他長度的。
所以當arry的長度不夠用的時候，需要宣告一個新的array來把東西搬過來放。
但是我們用C#的時候很多時候都直接用List&lt;T&gt;做處理，像是下面
var userNo = new List&lt;int&gt;(); for(var i = 0 ; i &lt; 5 ; i++) { userNo.Add(i); } 我們就是單純的把數字填入List&lt;T&gt;中，那&hellip;在這段程式怎麼在記憶體中分配呢?分配的容量又是多少呢??
首先，我們先來看一下，List&lt;T&gt;中有這個屬性
範例1 (list capacity) 以及 範例2 (list capacity) 沒錯，就是Capacity，我們來看看MSDN上面的說明
也寫點程式來驗證一下..
var a = new List&lt;int&gt;(); Console.WriteLine(a.Capacity); for (var i = 0; i &lt; 3; i++) { a.Add(i); Console.WriteLine(a.Capacity); } //output // 0 --最一開始是零沒問題 // 4 --疑?我加一個東西就變成4了.... // 4 // 4 // 4 // 8 --為啥我加到第五個就變成8了呢? 這個時候最快的方式就是進去Add看一下List&lt;T&gt;.Add()做了啥事
反編譯後的Add method 然後我們來看看裡面的AddWithResize(item)]]></description></item></channel></rss>